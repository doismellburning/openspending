<html xmlns:py="http://genshi.edgewall.org/"
  xmlns:i18n="http://genshi.edgewall.org/i18n"
  xmlns:xi="http://www.w3.org/2001/XInclude" py:strip="">

  <py:def function="nav_class">nav-dataset</py:def>

  <py:def function="page_title">All datasets</py:def>

  <div py:def="content">
    <!-- templates/dataset/index.html -->

    <h2 class="page-header">Available data sets</h2>
    <p>The database contains the following datasets:</p>

    <div class="row">
      <div class="span-two-thirds"> 
        <div py:for="dataset in c.results">
          <h3><a class="dataset-name" href="${url(controller='dataset',
            action='view', dataset=dataset.name)}">
              ${dataset.label}
            </a>
          </h3>
          <div py:if="dataset.description">
              ${h.markdown_preview(dataset.description)}
          </div>
          <br/>
        </div>
      </div>
      <div class="span-one-third">
        <h3>Countries</h3>
        <ul>
          <li py:for="(territory, count) in c.territory_options">
            <a py:if="not ('territories', territory) in c.query" 
              href="${c.add_filter('territories', territory)}">${h.COUNTRIES[territory]}</a>
            <a py:if="('territories', territory) in c.query" class="unfilter" 
              href="${c.del_filter('territories', territory)}">${h.COUNTRIES[territory]}</a>
            (${count})
          </li>
        </ul>
        <h3>Languages</h3>
        <ul>
          <li py:for="(language, count) in c.language_options">
            <a py:if="not ('languages', language) in c.query"
              href="${c.add_filter('languages', language)}">${h.LANGUAGES[language]}</a>
            <a py:if="('languages', language) in c.query" class="unfilter"
              href="${c.del_filter('languages', language)}">${h.LANGUAGES[language]}</a>
            (${count})
          </li>
        </ul>
      </div>
    </div>
  </div>

  <xi:include href="../layout.html" />
</html>

